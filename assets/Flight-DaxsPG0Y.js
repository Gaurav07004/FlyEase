import{u as j,g as N,r as g,a2 as _,a3 as $,a4 as y,j as s,R as S,a5 as I,a6 as R,a7 as T}from"./index-B2uhBTqO.js";const E=()=>{const i=j(),a=N(t=>t),u=g.useCallback(async()=>{try{let t=a.booking.departureAirport.length>0?a.booking.departureAirport[0].iata:"BOM",r=a.booking.arrivalAirport.length>0?a.booking.arrivalAirport[0].iata:"DEL";const e=await i(_({input_1:t,input_2:r,selected_Date:a.booking.currentDate}));console.log("departureIata",t,"arrivalIata",r),console.log("departureIata2",a.booking.departureAirport.length>0?a.booking.departureAirport[0].iata:null,"arrivalIata2",a.booking.arrivalAirport.length>0?a.booking.arrivalAirport[0].iata:null);const{filteredAirlineData:o,logoPromises:n}=e.payload,c=await Promise.all(n);i($(o)),i(y(c))}catch(t){console.error("Error fetching airline data:",t)}},[a.booking.departureAirport,a.booking.arrivalAirport,a.booking.currentDate,i]);g.useEffect(()=>{u()},[u]);const l=t=>{const[r,e]=t.split(":"),o=r>=12?"PM":"AM";return`${r}:${e} ${o}`},d=t=>{const r=Math.floor(t/60),e=t%60,o=r<10?`0${r}h`:`${r}h`,n=e<10?`0${e}m`:`${e}m`;return`${o} ${n}`},p=(t,r,e)=>{let o=0;return t>=600&&r!==e?o=Math.floor(Math.random()*75001)+5e3:t>120&&r!==e?o=Math.floor(Math.random()*2001)+3e3:t<=120&&r!==e||r===e&&t>=120||t<=180&&r===e?o=Math.floor(Math.random()*3001)+5e3:o=Math.floor(Math.random()*75001)+5e3,o},m=(t,r)=>{let e=0;return e=t-r,e},f=()=>1057,h=t=>{let r;return t>=150?r="1 Stop":r="Non Stop",r},b=t=>{if(t>=11&&t<=13)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},x=(t,r)=>{let e=a.booking.currentDate.getDate();t!==r&&(e+=1);const o=b(e);return`${e}${o}`},k=(t,r)=>{const e=p(t.duration,a.booking.departureAirport.country,a.booking.arrivalAirport.country),o=f(),n=m(e,o),c=d(t.duration),v=l(t.dep_time),A=l(t.arr_time),D=h(t.duration),M=x(a.booking.departureAirport.country,a.booking.arrivalAirport.country);i(I({date:M,price:e,Subprice:n,Taxes:o,departure:v,arrival:A,stop:D,time:c})),i(R(r)),i(T(t))};return s.jsxs("main",{className:"flightpanel font-sans",children:[s.jsxs("p",{className:"text-zinc-600 font-bold tracking-wider text-sl m-2 pt-6 pr-8 pb-0 pl-2",children:["Choose a ",s.jsx("span",{className:"text-amber-400",children:"Departing"})," Flight"]}),s.jsx("section",{className:"flightDeal",children:a.booking.departureAirlineResult.map(t=>s.jsx(S.Fragment,{children:a.booking.departureLogoResult.map(r=>r.logo_url&&r.iata===t.airline_iata&&s.jsxs("div",{className:"Departure_info",onClick:()=>k(t,r),children:[s.jsx("div",{children:s.jsx("img",{src:r.logo_url,alt:"logo",className:"airlinelogo"})}),s.jsxs("div",{className:"airlineInfo",children:[s.jsx("div",{className:"duration",children:d(t.duration)}),s.jsx("div",{className:"Departure_airline",children:r.name})]}),s.jsxs("div",{className:"Departure_arrival_time",children:[l(t.dep_time)," - ",l(t.arr_time)]}),s.jsx("div",{className:"stopInfo",children:h(t.duration)}),s.jsxs("div",{className:"Departure_price",children:["â‚¹ ",p(t.duration,a.booking.departureAirport.country,a.booking.arrivalAirport.country)]})]},r.iata))},t.airline_iata))})]})};export{E as default};
